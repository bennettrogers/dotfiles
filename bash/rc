#!/bin/bash
rcfiles=$HOME/.homesick/repos/dotfiles

system=`$rcfiles/system`

if [ -f ~/.localenv ]; then
	source ~/.localenv
fi

source $rcfiles/bash/colors

if [ "$system" == 'Linux' ]; then
	source $rcfiles/bash/rc.linux
fi
if [ "$system" == 'OSX' ]; then
	source $rcfiles/bash/rc.osx
fi

if [ ! -n "$HOSTNAME" ]; then
	HOSTNAME=`hostname -s`
fi

source $rcfiles/aliases
source $rcfiles/bash/completion

if [[ -f ~/.dir_colors && ( -x /usr/local/bin/dircolors || -x /usr/bin/dircolors ) ]]; then
    eval `dircolors ~/.dir_colors`
fi

#autostart tmux
if [ "$PS1" != "" -a "${STARTED_TMUX:-x}" = x -a "${SSH_TTY:-x}" != x ]
then
    STARTED_TMUX=1; export STARTED_TMUX
    ~/.local/bin/tmux-shared remote && exit 0
    echo "tmux failed to start"
fi

unset rcfiles
unset system
